<html><head></head><body><pre style="word-wrap: break-word; white-space: pre-wrap;">Patch-ID# 136937-04

NOTE:
***********************************************************************
READ THE TERMS OF THE AGREEMENT ("AGREEMENT") IN THE LEGAL_LICENSE.TXT
FILE CAREFULLY BEFORE USING THIS SOFTWARE. BY USING THE SOFTWARE, YOU
AGREE TO THE TERMS OF THIS AGREEMENT. IF YOU DO NOT AGREE TO ALL OF THE
TERMS, PROMPTLY DESTROY THE UNUSED SOFTWARE.
***********************************************************************

Keywords: hardware prom: sparc enterprise t5440 7.1.8.a flashprom security
Synopsis: Hardware PROM: SPARC Enterprise T5440 Sun System Firmware with LDOMS support
Date: Apr/15/2009


Install Requirements: Additional instructions may be listed below                      
                      
Solaris Release: 10

SunOS Release: 5.10

Unbundled Product: Sun System Firmware

Unbundled Release: 7.1.8.a

Xref: 

Topic: SPARC Enterprise T5440 Sun System Firmware 7.1.8.a flashprom update

Relevant Architectures: sparc

BugId's fixed with this patch: 4794955 6358537 6504694 6516471 6517022 6523695 6525973 6529467 6562812 6563363 6568272 6580094 6582340 6585188 6587917 6590769 6594218 6596503 6599677 6609765 6612618 6615866 6630717 6634169 6647462 6652046 6654559 6654865 6656072 6656086 6656116 6661787 6663105 6664365 6669255 6669488 6670786 6671070 6673405 6674578 6675677 6675793 6678160 6678254 6678801 6682845 6684545 6685195 6685358 6692325 6692478 6694217 6694387 6694475 6694997 6695671 6695708 6698177 6698816 6701489 6701750 6709034 6710601 6710924 6713342 6713920 6716711 6716834 6717871 6717911 6718186 6719096 6719873 6720237 6720279 6720926 6721956 6722035 6722305 6722322 6722446 6723191 6723610 6724215 6724342 6724535 6724547 6724588 6724660 6724985 6725223 6725348 6726077 6726541 6726902 6726920 6727932 6728347 6728454 6728569 6728748 6728954 6729411 6729474 6729529 6730129 6730281 6730282 6730610 6730744 6731027 6731112 6731227 6731231 6731291 6731651 6732222 6732265 6732269 6732655 6733001 6734035 6734387 6734405 6734408 6734503 6735362 6735386 6735506 6736206 6736340 6737155 6737234 6737239 6737472 6737666 6738335 6738367 6739048 6739392 6740145 6740559 6740773 6740949 6741575 6742200 6742292 6742464 6743027 6743561 6743825 6744156 6744987 6745118 6745296 6747230 6747621 6748859 6749345 6749425 6749654 6750193 6750687 6750734 6750857 6750929 6751051 6751492 6751699 6753562 6754453 6754668 6754698 6754707 6754755 6754833 6755425 6755810 6755818 6756775 6757022 6757819 6759780 6760181 6760186 6760448 6761821 6762441 6762703 6763109 6763110 6765647 6766240 6768857 6769672 6770171 6770610 6770813 6772485 6773666 6774655 6776242 6776441 6778578 6778828 6778939 6781831 6781861 6782824 6787915 6787965 6789243 6789447 6790025 6790291 6790690 6790692 6790694 6791294 6792104 6793942 6794672 6797795 6799087 6800689 6801373 6802075 6802513 6803715 6804349 6807927 6808990 6811587 6813963

Changes incorporated in this version: 6813963 6811587 6808990 6807927 6804349 6803715 6802513 6802075 6801373 6800689 6799087 6797795 6794672 6793942 6792104 6791294 6790694 6790692 6790690 6790291 6790025 6789447 6789243 6787965 6787915 6782824 6781831 6778939 6778828 6776441 6772485 6770171 6768857 6766240 6763109 6762441 6761821 6759780 6755810 6736340 6722322 6710601 6656116 6654559 6580094

Patches accumulated and obsoleted by this patch: 

Patches which conflict with this patch: 

Patches required with this patch: 

Obsoleted by: 

Files included with this patch: 

Sun_System_Firmware-7_1_8_a-SPARC_Enterprise_T5440.pkg
sysfwdownload

Problem Description:

6580094 Wrong traps sent for assertion/deassertion of sensors whose names end with  OK or GOOD 
6654559 SNMPWalk on ENTITY-MIB::entPhysicalName table gives zero results 
6656116 Memory link training errors should not fault the MCU 
6710601 ILOM shell could report Configured (orderable) Part Number for FRUs 
6722322 C-Style guidelines for spacing around '++' not being enforced. 
6736340 CPU module fault LED is on,Service LED is not,no indication of problem from showcomponent,showfaults 
6755810 Maramba: FBDIMM high warning alert seen during OPS VTS testing. 
6759780 keyswitch_state unrecognized chassis message occurs 
6761821 powercycle -i fails to poweroff the system during the second iteration. 
6762441 Accuracy of output from 'showpower' isn't sufficient 
6763109 HOST incorrectly powers on after sp reset when HOST_AUTO_POWER_ON = disabled 
6766240 DVD boot read failures from obp prompt (intermittent DVD DRIVE MISIDENTIFIED may be seen) 
6768857 V_VTTL reached non-recoverable threshold and the server powered off. 
6770171 Power supply should not be faulted when AC power is not present 
6772485 After Node Reconfig, LDOMs manager daemon fails to start 
6776441 Faults not restored after a reboot 
6778828 The dimms was disabled automatically after enabling component 
6778939 'ipmitool fru list' fails with the message 'FRU Read failed: Invalid command on LUN' with bmc i/f 
6781831 Solaris date/time jumps accordingly following ILOM date/time auto-adjusted with ntp server 
6782824 flx23361 - ILOM can not control host after VBSC failure 
6787915 Apparent memory leak in capi_get_FRUData_private() 
6787965 At post sequence, a CPU core was disabled by mistake, when a faulted DIMM was installed 
6789243 Apparent memory leak in xxx_set_fault_data/xxx_clear_fault_id 
6789447 plathwsvcd: Apparently leaking sockets 
6790025 ealertd: Consuming many file descriptors 
6790291 Glendale/Scottsdale need to support REM-less operation 
6790690 snmpd does not close log file on logrotate 
6790692 ipmi log file not closed in all cases.  Log file held open 
6790694 lib newstatus does not close lock file fd on fini 
6791294 libcfgdbaccess: Leaking memory 
6792104 Another memory leak in libcfgdbaccess 
6793942 ILOM IPMI VbscIfc code does not properly check for log file size and offset 
6794672 Fan failing was found after replacing PSU on IOBOX (2) 
6797795 sc_cliprompt didn't take effect 
6799087 An IBIST failure with reconfigure sometimes leaves the memory control unit, MCU, in a strange state 
6800689 need to provide tools to handle fruid corruption due to incomplete i2c writes 
6801373 vbsc 'install' rule cannot be build by dmake, causing WOS assembler to have to revert to make 
6802075 POST ops1 failed "FATAL ERROR 3", "Unexpected Trap" on N2 systems 
6802513 ALOM shell has ILOM prompt '-&gt;' 
6803715 'ipmitool fru list' fails with Invalid cmd on LUN' with bmc i/f on Thunder Monza Glendale 
6804349 DVD will not boot -- OBP fix missing to compliment CR 4976792 (READ RETRY) 
6807927 VF System keeps power cycles and can't go to obp after POST test done. 
6808990 Host time goes back by 5 minutes after AC powercycle 
6811587 SPARC blades sometimes don't set the slotid correctly 
6813963 Socket leak in Turgo and Congo fan speed control code 
 
(from 136937-03 - Sun System Firmware 7.1.7.d)
 
6781861 2P:CMP2-CMP3: 8GB dimms, disable one, get ERROR: Invalid number of enabled memory controllers 0 
6778578 More dependencies needed to stop dmake races 
6776242 ipmi lan handler is not thread safe 
6774655 POST loops with "ERROR: No good memory bank/channel left in system" 
6773666 dmake race caused by a .o rule not having a dependency on the parent (sparc) directory 
6770813 L2C scrubber code is faulty 
6770610 Node Reconfig 2P with CPM1 and CMP3 ERROR: POST timed out. Not all system components tested. 
6769672 Incomplete fix for 6757022 
6765647 ASR path names incorrect for PCIE slots in some configs 
6763110 NULL pointer dereference in vbsc_send_polled 
6762703 ERROR: PROP_STR: Not enough memory to expand MD for new property path value 
6760448 scc will coredump if no there's no mac address 
6760186 queue_test_timed() function fails to complete under some conditions 
6760181 Misc fixes needed for ilom_3.0_sparc b13 
6757819 DAC ereport calls out wrong unum on sys with L2 index hashing (HV) 
6757022 Host getting wedged when resetting sc while host is already powered on 
6756775 Sync ilom nacs with vbsc nacs for batoka 
6755818 Corruption of "my-self" causing missing "idprom" property in root node 
6755425 More POST threads starting than expected 
6754833 Intermittent failures seen on reboot and power cycle 
6754755 Signed JARs need to be checked into the Latest release branch 
6754707 Some sparc platforms missing entries in files.cps 
6754698 Wolf: IPMI is leaking sessions 
6754668 stlistener is using hundreds of sockets 
6754453 Maramba POST intermittently fails during the 100 power cycle with an LDOM created primary domain. 
6753562 Failures of a secondary CMP master are not handled properly 
6751699 Dynamic fruid should minimize creating/deleting new segments 
6751492 genimage needs to be able to generate an image with a FW_VERSION field with a suffix 
6751051 POST reports hundreds of free resource timeouts 
6750929 LDOM Device and Slot Reset Control Register values incorrect for non-standard configs 
6750857 Batoka service LED does not light during POST. 
6750734 Continuous output of "ERROR: Failed to send a fma event(rc=11)" during POST 
6750687 Remove fpga_host_power vbsc ipc interface that allows ILOM to directly toggle power 
6750193 ILOM can not power on/off the host after many reset loops (~122 times) 
6749654 ILOM inadvertently disables the XAUI 
6749425 HVABORT still prints address of fatal_error 
6749345 N2/VF error storm prevention using CERER is incorrect 
6748859 With Boot Timer, changing keyswitch position clears logs/event history &amp; event does not get logged 
6747621 RN50 fcode needs to support new memory 
6747230 "1:4:0&gt;ERROR: TEST = PIU intx interrupt test" is output during POST 
6745296 FMA ereport calls out wrong DIMM on some N2/VF systems 
6745118 C10/C48:After edit CMM's network in webgui,can not relog web by using new ip address. 
6744987 /usr/local/bin/scc segfaults on thunder SP 
6744156 Regression - alom cli showpower -v OUTPUT limit is 0.00 
6743825 POST menu IO-Bridge unit dump causes a crash 
6743561 A disabled XAUI card is detected by POST 
6743027 Upgrade of firmware with oem-logo values causes hang in OBP - N1 only 
6742464 I2Ctest fails on Huron and Maramba platform. 
6742292 poweroff should be disabled when 3 PSUs are not operational 
6742200 Change for 6599677 also needs workaround for 6694663 to support existing versions of ldoms manager 
6741575 PSU INPUT_POWER values are off 
6740949 POST Block Mem Schmoo Test is N1 only - Remove for N2/VF 
6740773 Output incorrect location for memory module on T5440 
6740559 Set /SYS/PS0 prepare_to_remove_action returns power must be off error 
6740145 8-bit data element overflows when using 10-bit i2c addresses, plus general lightning cleanup 
6739392 Reset host causes POST to fail GBE tests 
6739048 'showsc version -v' is not showing complete version information with firmware 7.1.6 
6738367 ILOM IPMI VbscIfc should decode payload data when displaying log 
6738335 BUI test of Remote Power Control Graceful shutdown and PowerOn fails 
6737666 T5440 PCIe slots do not show up after CMP's added and sys_ioreconfig set to false 
6737472 CMM not working with RADIUS server (RSA Ace Server with token card authentication) 
6737239 Remove unsupported power interfaces from all sun4v systems 
6737234 sys_ioreconfigure property not saved on SCC 
6737155 Need clear notification of processor failure 
6736206 FAN Fault LED and "showfaults" don't indicate FAN removal 
6735506 POST is mis-handling a FBR error, if the FBR occurs too early in POST 
6735386 /SP/powermgmt "policy" property values must change 
6735362 Can't get users role - plathwsvcd and lumain.core files seen after setdefaults/resetsc 
6734503 sunPlatEquipmentAlarmStatus in ILOM MIB not set correctly at or around threshold values for sensors 
6734408 Support change from remote-keyboard to rkeyboard in OBP 
6734405 Change remote-keyboard to rkeyboard in devalias. 
6734387 DC PSU should not have high line INPUT voltage threshold set 
6734035 Missing breaks in switch statement for single node MD pruning. 
6733001 Back out change for CR 6731651 
6732269 Many "lumain: (pam_ActDir-BE): ERROR" messages in /var/log/messages of SP after SP is reset 
6732265 POST failures in pre-CMT platforms 
6732222 nodefault-bytes is not persistent 
6731651 Immediate control domain reset request does not generate guest stopped messaged to vbsc. 
6731291 Remove exported funcs that allow ALOM/ILOM to directly toggle power 
6731231 show-devs and prtdiag still show disabled components 
6731227 "Invalid hypervisor argument(s). function:" when changing IO bus config, can't boot again 
6731112 Default case in init-xmac-xif sets mii-gmii-mode incorrectly 
6731027 After reset SP issue Solaris init 0 then halt will hang forever 
6730744 factory-default guest missing 32MB of memory which is currently unallocated 
6730610 Memory holes on SE T5440 can cause overrun of MD allocations 
6730282 Link up status message includes confusing "duplex = 0" 
6730281 Netboot via Maramba's Neptune port2 or 3 fails if a copper XAUI is plugged in 
6730129 rpc calls are not thread safe 
6729529 Product definition cleanup 
6729474 BUI powercycle needs to allow more time for gracefully host shutdown 
6729411 immu_err does not set context correctly 
6728954 Enable IIT feature for Huron and Maramba. 
6728748 Low temperature detected when "ipmitool" is used 
6728569 consd does not clean up and causes ILOM instability 
6728454 Remove support for N2 erratum 106 
6728347 Somewhat incorrect fru name 
6727932 CPU causing reset errors - disabled during poweron 
6726920 No disks in Batoka reconfig phase 2 config: 2p x CMP1+CMP3 w/ 7.1.5 build_03 
6726902 i2c-algo-8xx.o: Mux: 0x72 enable failed on 1P configs 
6726541 Need a way to set configure the minimum fan speed for the ifc algorithm 
6726077 showenvironment rounds down fractional values while dpdump (and SunMC) round them up 
6725348 Disabled CPU thread is not shown correctly 
6725223 vcpu dr with heavy traffic causes loss of network connectivity for guest domains 
6724985 ILOM can not power off host - flx23014 
6724660 xml parsing in capidirect is slow and fragments memory 
6724588 JRC - L10n - French keyboard with Java 6u10 Alt Graph fix has some broken keys 
6724547 Update BUI Remote Power Control to include graceful/immediate SYS reset 
6724535 hvabort() with TL==0 at startup will cause an illegal_instruction trap 
6724342 HV does not send guest starting message to vBSC after domain reset 
6724215 SP reports prom is unreadable or corrupted when CMP module is removed but Memory Module stays in sys 
6723610 sysfwdownload -u should perform a graceful shutdown or insert a delay 
6723191 HOST domain status is wrong after control domain reset when auto-boot is disable 
6722446 guest.entry is just dead weight 
6722305 xml parsing in libfruid is slow and consumes/fragments memory 
6722035 Warn user after PEU fails to train with link width x8 
6721956 JRC - L10n - backslash and close curly brace does not work on Spanish keyboard on Windows 
6720926 incremental builds don't work 
6720279 FW support for XAUI Copper--Optional implementation of voltage sequencer fault recovery mechanism 
6720237 Add Copper XAUI support for Batoka 
6719873 Lynx: Fault Management displays Chassis Intrusion Fault but Timestamp field empty... 
6719096 all ILOM: show /SYS SP data doesn't display with level all parameters 
6718186 Need VF MD house-keeping 
6717911 [watch]Invalid target /SP/clients/radius 
6717871 [watch]Invalid target /SP/clients/ldap 
6716834 IPMI Lanconfig internal structure may be accessed out of bounds 
6716711 Provide BUI and SNMP methods for graceful reset of the system 
6713920 New Fbdimm settings for Qimonda AMBs on Huron and Turgo 
6713342 Failure with re-config will cause false L2 cache failures 
6710924 gemini/pegasus: change in DCHP address on gemini blade leaves 9501 out of date 
6709034 Andro CMM: Policy tab missing from GUI, available from CLI 
6701750 Empty HDD "container" entities have incorrect sunPlatEquipmentHolderStatus in ILOM/SNMP MIB 
6701489 Log faults from vbsc 
6698816 Multiple (all?) objects in the SUN-PLATFORM-MIB return "noSuchInstance" during SNMP GET 
6698177 ILOM does not allow hyphen "-" character in SNMP community string 
6695708 showpower should display matched AC/DC power valued based on displayed voltage and current. 
6695671 ILOM needs to handle DC input voltage correctly. 
6694475 'showfru -g lines' command does not function as expected 
6694387 OBP NIU will try to run 10G copper at 1G 
6694217 Thumper: HDD state sensors send the same trap for different events 
6692478 The ILOM user name should be set with an alphabetical characters. 
6692325 Send Alt-Graph(right alt) keystroke to remote host directly 
6685358 Need some caching in snmp 
6685195 Target /SP/diag is missing from CLI when login as an operator 
6684545 Changing socketed EEprom can result in sccd core file and sccd daemons timing out 
6682845 Unexpected trap37 when running memory screen 
6678801 Logrotate message will cause a message file rotation in about 2.9 hours 
6678254 ipmitool sunoem cli through lanplus prints out garbages 
6678160 FW support for XAUI Copper--I2C controlled MDIO interface level shifting 
6675793 POST hangs when using diag_verbosity=debug 
6675677 POST membist test fails when CH0/D0 is disabled on a branch 
6674578 Sparse CPU support for cpu-struct table 
6673405 Adding memory to system causes the saved LDoms configs on the SP to be invalidated 
6671070 POST diagnoses to a wrong dimm if a faulty dimm is in either D2 or D3 slots 
6670786 Support backoff/timeout in sram guest state poller to avoid case where SC becomes slow/unresponsive 
6669488 POST times out with verbosity min 
6669255 Domains fail to boot from the right devalias name 
6664365 flx20948: CP2500 boot-device can be corrupted with a bad read from the AC
6663105 hvctl call failed because of out of memory errors. 
6661787 POST support for Batoka 
6656086 Create persistent fault for memory configuration errors 
6656072 post cpu tests failures, hardware under test is wrong field may state/fail wrong core 
6654865 OBP support for xaui copper 
6652046 XAUI Conflicting error message 
6647462 Problem with T2000 SysFW 6.5.5, won't see DVD rom device after upgrade 
6634169 flx22265: JLL13: no power-off on hotswap causes mcnet to fail to come up on Jade satellites 
6630717 Add firmware support for FBDIMM1+ DIMMs for VF platforms 
6615866 ILOM should print FRUID temperature records in human-readable degrees C 
6612618 SNMP sunPlatSensorTable missing PS0-5 &amp; RFM0-8 sensor data on Scorpio P0 
6609765 fault event generation code in sensors.c causes incorrect HW Trap MIB trap events 
6599677 HV uses resource_id as an index to access the Hammerhead config space 
6596503 Non-existent CPU cores and strands shown in PICL tree as enabled 
6594218 poweron should not be allowed after flashupdate 
6590769 Help messages for ALOM break should be updated 
6587917 -n option to restartssh does not seem to do anything 
6585188 poweron -c &lt;FRU&gt; incorrectly powers on host, should return error 
6582340 Write to vbsc: Illegal seek 
6568272 alom inj command should be hidden from customers 
6563363 setdiagopt command will not accept more that 254 characters 
6562812 The ldm list-config output can be confusing when issued after a delayed reconfiguration reset 
6529467 POST should handle preceeding spaces gracefully 
6525973 SC should log an event after flashupdate completes 
6523695 cpu_mondo_send(): reconfiguring queue after receiving EWOULDBLOCK leads to tail pointer errors 
6517022 Inconsistent error messages seen on ilom (useradd, etc.). Different than alom cmt also. 
6516471 Attempt to set sc_clitimeout to non-integer value should return error 
6504694 Invalid confirmation answer not consistent and returns different string on ilom vs alom cmt 
6358537 CLI: missleading error message when LOCATE led is set 
4794955 POST debug menu's help not implemented 
 
(from 136937-02 - Sun System Firmware 7.1.5.c)
 
6732655 Sun ILOM web interface should enforce stricter authentication
6694997 Starting a guest domain with a PCI bus added to it causes PCI subsystem errors on a different bus.
 
(from 136937-01 - Sun System Firmware 7.1.5.b)
 
NONE Initial release on SPARC Enterprise T5440.

Patch Installation Instructions:
--------------------------------
 
 
Please refer to the Install.info file for instructions on updating the firmware
in the flashprom using the files included in this patch.  In particular, there
is information on the differences involved with the ILOM-based Sun System
Firmware (7.x) in connection with the use of the Solaris Sun Update Connection
utility.

Special Install Instructions:
-----------------------------
 
NOTE 1: Firmware component revisions included with this release:
 
	Sun System Firmware 7.1.8.a 2009/03/15 15:01
	--------------------------------------------
	ILOM 2.0.4.28.a Mar 15 14:25:51 PDT 2009
        Hypervisor 1.6.9 2009/03/12 08:42
        OBP 4.29.2 2009/03/12 06:54
        POST 4.29.2 2009/03/12 07:25
	VBSC 1.6.9  Mar 15 2009  14:00:30
 
	Checksum of Sun_System_Firmware-7_1_8_a-SPARC_Enterprise_T5440.pkg : 1325710679
        (generated by the /usr/bin/cksum command)
 
 
NOTE 2: By using Sun System Firmware (Firmware) you agree to the terms of the
        Software License Agreement and Entitlement (SLA/Entitlement) found in
        FIRMWARE_SLA+Entitlement.txt in the Legal directory.  By using the Firmware, 
	you agree to the terms of the SLA/Entitlement. If you do not agree to all 
	of the terms promptly destroy the unused Firmware.
 
NOTE 3: Please refer to the online documentation for feature and version
        compatibility between Sun System Firmware and LDom Manager releases.
        LDoms release notes are available on http://docs.sun.com under this title
        and part number:Logical Domains (LDoms) 1.0.3 Release Notes 820-4895
 
NOTE 4: Please visit http://www.sun.com/opensourcecode to download the
        firmware's open source components that are required to be made available
        under open source licenses.

README -- Last modified date:  Wednesday, April 15, 2009

</pre></body></html>